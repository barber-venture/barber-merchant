<ion-view view-title="Home" name="home-view" class="homeBG" cache-view="false">
    <ion-header-bar class="bar-positive">
        <button class="button icon ion-chevron-left no-border" ng-click="myGoBack()"></button>
        <h1 class="title">{{userDetail.UserDetail.name}}</h1>
    </ion-header-bar>
    <ion-content overflow-scroll="true" class="padding">
        <ion-list>
            <ion-item class="item">
                <div class="item-avatar">
                    <img ng-if="userDetail.UserDetail.profile_picture == ''" src="img/profile.jpg" class="avtar-custom" />
                    <img ng-if="userDetail.UserDetail.profile_picture != ''" src="{{userDetail.UserDetail.profile_picture}}" class="avtar-custom" />
                </div>
                <div class="top-corner">{{userDetail.UserDetail.gender}}</div>
                <div class="center-align">{{userDetail.UserDetail.name}}</div>
                <div class="center-align size-10">{{userDetail.UserDetail.current_reviews}} Reviews, Follower({{userDetail.UserDetail.current_followers}}), Following({{userDetail.UserDetail.current_following}})</div>
            </ion-item>

            <ion-item class="item">
                <div class="center-align">Reviews</div>
                <div class="list margin-top-5" ng-repeat="review in userDetail.Review">
                    <ion-item>
                        <div class="row">
                            <div class="col-50 left-align">{{review.Merchant.name}}</div>
                            <div class="col-50 right-align size-10">
                                <span ng-repeat="(k,type) in review.Merchant.MerchantType">
                                    <span ng-if="k > 0">,</span>
                                    {{type.name}}
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="size-10">{{review.Merchant.address}}</div>
                        </div>
                    </ion-item>
                    <ion-item>
                        <p class="size-12 full-text">{{review.Review.review}}</p>
                        <div class="top-corner size-10 margin-right-20">{{review.Review.created| date: 'medium'}}</div>
                        <div class="size-10">Rated {{review.Review.rating}}</div>
                    </ion-item>
                    <ion-item ng-if="review.UserImage.length > 0">
                        <ion-slide-box ng-init="remainder = Math.ceil(review.UserImage.length / 3)">
                            <ion-slide ng-repeat="key in Range(remainder)">
                                <img ng-repeat="(k,val) in review.UserImage" ng-if="((k < (3 * key)) && (k>=((3*key)-3)))" data-val="{{k}}"  src="{{val.image}}" style="width:30%" />
                            </ion-slide>
                        </ion-slide-box>
                    </ion-item>
                    <ion-item>
                        <div class="row">
                            <button class="button col col-30 icon ion-thumbsup" ng-click="makeLike(review.Review.id)" id="reviewLike">({{review.Review.current_likes}})</button>
                            <button class="button col col-40 icon ion-chatbubble" ng-click="makeComment(review.Review.id)" id="reviewComment"> ({{review.Review.current_comments}})</button>
                            <button class="button col col-30 icon ion-share" ng-click="makeShare(review.Review.id)" id="reviewShare"> ({{review.Review.current_shares}})</button>
                        </div>
                    </ion-item>
                </div>
            </ion-item>
        </ion-list>
    </ion-content>

</ion-view>
